### YamlMime:UniversalReference
items:
  - uid: '@azure/ms-rest-azure-env.loginWithVmMSI'
    name: loginWithVmMSI()
    children: []
    type: function
    langs:
      - typeScript
    summary: >
      Before using this method please install az cli from
      https://github.com/Azure/azure-cli/releases.

      If you have an Azure virtual machine provisioned with az cli and has MSI
      enabled,

      you can then use this method to get auth tokens from the VM.

      To create a new VM, enable MSI, please execute this command:

      az vm create -g <resource_group_name> -n <vm_name> --assign-identity
      --image <os_image_name>

      Note: the above command enables a service endpoint on the host, with a
      default port 50342


      To enable MSI on a already provisioned VM, execute the following command:

      az vm --assign-identity -g <resource_group_name> -n <vm_name> --port
      <custom_port_number>


      To know more about this command, please execute:

      az vm --assign-identity -h


      Authenticates using the identity service running on an Azure virtual
      machine.

      This method makes a request to the authentication service hosted on the VM

      and gets back an access token.
    syntax:
      content: function loginWithVmMSI()
      parameters: []
      return:
        type:
          - Promise<@azure/ms-rest-azure-env.MSIVmTokenCredentials>
        description: >-
          If a callback was passed as the last parameter then it returns the
          callback else returns a Promise.

             {function} optionalCallback(err, credentials)
                          {Error}  [err]                               - The Error object if an error occurred, null otherwise.
                          {object} [tokenResponse]                     - The tokenResponse (tokenType and accessToken are the two important properties)
             {Promise} A promise is returned.
                      @resolve {object} - tokenResponse.
                      @reject {Error} - error object.
    package: '@azure/ms-rest-azure-env'
references:
  - uid: Promise<@azure/ms-rest-azure-env.MSIVmTokenCredentials>
    name: MSIVmTokenCredentials>
    spec.typeScript:
      - name: Promise<
        fullName: Promise<
      - name: MSIVmTokenCredentials
        fullName: MSIVmTokenCredentials
        uid: '@azure/ms-rest-azure-env.MSIVmTokenCredentials'
      - name: '>'
        fullName: '>'
